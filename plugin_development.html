
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial to develop a Spyder plugin &#8212; Spyder Developer Docs 6 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=47b62374"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'plugin_development';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extending Spyder" href="common_extension_points.html" />
    <link rel="prev" title="Our first Spyder plugin" href="plugin_tutorial_1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/spyder_logo.svg" class="logo__image only-light" alt="Spyder Developer Docs 6 documentation - Home"/>
    <script>document.write(`<img src="_static/spyder_logo.svg" class="logo__image only-dark" alt="Spyder Developer Docs 6 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Spyder's terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="codebase_orientation.html">Codebase Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_elements.html">API Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="qt_introduction.html">Qt Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin_cookiecutter.html">Cookiecutter</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin_tutorial_1.html">The first plugin</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Plugin Development with Spyder</a></li>
<li class="toctree-l1"><a class="reference internal" href="common_extension_points.html">Extending Spyder</a></li>
<li class="toctree-l1"><a class="reference internal" href="design_patterns.html">Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="reference.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/spyder.api.html">spyder.api</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.asyncdispatcher.html">spyder.api.asyncdispatcher</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/spyder.api.config.html">spyder.api.config</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.config.decorators.html">spyder.api.config.decorators</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.config.mixins.html">spyder.api.config.mixins</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.editor.html">spyder.api.editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.exceptions.html">spyder.api.exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.fonts.html">spyder.api.fonts</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/spyder.api.plugin_registration.html">spyder.api.plugin_registration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.plugin_registration.decorators.html">spyder.api.plugin_registration.decorators</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.plugin_registration.mixins.html">spyder.api.plugin_registration.mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.plugin_registration.registry.html">spyder.api.plugin_registration.registry</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/spyder.api.plugins.html">spyder.api.plugins</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.plugins.enum.html">spyder.api.plugins.enum</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.plugins.new_api.html">spyder.api.plugins.new_api</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.preferences.html">spyder.api.preferences</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/spyder.api.shellconnect.html">spyder.api.shellconnect</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.shellconnect.main_widget.html">spyder.api.shellconnect.main_widget</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.shellconnect.mixins.html">spyder.api.shellconnect.mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.shellconnect.status.html">spyder.api.shellconnect.status</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.shortcuts.html">spyder.api.shortcuts</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.translations.html">spyder.api.translations</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/spyder.api.utils.html">spyder.api.utils</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/spyder.api.widgets.html">spyder.api.widgets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.auxiliary_widgets.html">spyder.api.widgets.auxiliary_widgets</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.comboboxes.html">spyder.api.widgets.comboboxes</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.dialogs.html">spyder.api.widgets.dialogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.main_container.html">spyder.api.widgets.main_container</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.main_widget.html">spyder.api.widgets.main_widget</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.menus.html">spyder.api.widgets.menus</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.mixins.html">spyder.api.widgets.mixins</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.status.html">spyder.api.widgets.status</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/spyder.api.widgets.toolbars.html">spyder.api.widgets.toolbars</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/spyder-ide/spyder-api-docs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/spyder-ide/spyder-api-docs/edit/main/plugin_development.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/spyder-ide/spyder-api-docs/issues/new?title=Issue%20on%20page%20%2Fplugin_development.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/plugin_development.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial to develop a Spyder plugin</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spyder-fundamentals">Spyder fundamentals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-plugin-concepts">Basic plugin concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spyderdockableplugin">SpyderDockablePlugin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spyderpluginv2">SpyderPluginV2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-will-we-do">What will we do?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pomodoro-technique">Pomodoro Technique</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-to-develop-a-plugin">Steps to develop a plugin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#development-environment">Development environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-development-environment">Setting up the development environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-repository">Creating a repository</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-plugin-structure">Defining the plugin structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-our-plugin">Building our plugin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-widgets">The widgets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-container">The container</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-plugin">The plugin</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-our-plugin">Testing our plugin</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-the-pomodoro-timer-work">Making the Pomodoro timer work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-timer-controls-to-the-toolbar">Adding timer controls to the toolbar</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-toolbar-subclass">Creating a toolbar subclass</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-high-level-toolbar-structure">Declaring the high-level toolbar structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementing-the-toolbar-behaviors">Implementing the toolbar behaviors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-the-toolbar">Registering the toolbar</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reviewing-our-changes">Reviewing our changes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-configuration-page">Adding a configuration page</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-defaults">Defining the defaults</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-preferences-page">Building the preferences page</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#propagating-config-changes">Propagating config changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-preferences">Registering preferences</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-our-plugin">Publishing our plugin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-pypi-account">Creating a PyPI account</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-and-checking-the-package">Building and checking the package</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-and-uploading-to-pypi">Testing and uploading to PyPI</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-words">Final words</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">Further reading</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="tutorial-to-develop-a-spyder-plugin">
<span id="tutorial-main"></span><h1>Tutorial to develop a Spyder plugin<a class="headerlink" href="#tutorial-to-develop-a-spyder-plugin" title="Link to this heading">#</a></h1>
<p>This tutorial walks you through creating a Spyder plugin to add a configurable <a class="reference external" href="https://www.pomodorotechnique.com/">Pomodoro Technique</a> timer to the status bar and toolbar buttons to interact with it.
Along the way, we’ll learn how to use Spyder’s API to develop plugins and extend their functionality.</p>
<p>To do so, we’ll:</p>
<ol class="arabic simple">
<li><p>List the <a class="reference internal" href="#tutorial-prereqs"><span class="std std-ref">Prerequisites</span></a> to implement a Spyder plugin.</p></li>
<li><p>Describe the <a class="reference internal" href="#tutorial-goals"><span class="std std-ref">Learning goals</span></a> that a participant can achieve.</p></li>
<li><p>Explain the <a class="reference internal" href="#tutorial-plugin-concepts"><span class="std std-ref">types of Spyder plugins</span></a> and their benefits.</p></li>
<li><p>Define how to <a class="reference internal" href="#tutorial-setup"><span class="std std-ref">set up an environment</span></a> for plugin development.</p></li>
<li><p>Go through the <a class="reference internal" href="#tutorial-building-plugin"><span class="std std-ref">steps</span></a> to build and publish a simple plugin.</p></li>
<li><p>Finally, highlight the key points of developing maintainable, adaptable plugins with Spyder.</p></li>
</ol>
<section id="prerequisites">
<span id="tutorial-prereqs"></span><h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h2>
<p>You will need to have Spyder 5 installed.
Visit our <a class="reference external" href="https://docs.spyder-ide.org/current/installation.html#install-guide" title="(in Spyder v5)"><span>Install Guide</span></a> for more information.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Spyder offers <a class="reference external" href="https://docs.spyder-ide.org/current/installation.html#install-standalone" title="(in Spyder v5)"><span>Standalone installers</span></a> for Windows, macOS and Linux, making it easier to get up and running with the application without having to download Anaconda or manually install it in your existing environment.
However, for this tutorial Spyder should be installed using Anaconda or Miniconda, as standalone installers currently do not allow adding extra packages like the plugin we are going to develop.</p>
</div>
<p>It is also desirable to have the following prior knowledge:</p>
<ul class="simple">
<li><p>Intermediate proficiency with Python.
You can visit <a class="reference external" href="https://docs.python.org/3/tutorial/">The Python Tutorial</a> to learn the basics of this programming language.</p></li>
<li><p>Basics of Qt application development using Python, either with <a class="reference external" href="https://www.riverbankcomputing.com/static/Docs/PyQt5/">PyQt</a> or <a class="reference external" href="https://doc.qt.io/qtforpython-5/index.html">PySide</a>.</p></li>
</ul>
<p>To quickly get started in desktop application development with Qt and Python, here is a set of open access resources:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://realpython.com/search?q=pyqt">Real Python - PyQt entries</a></p></li>
<li><p><a class="reference external" href="https://www.guru99.com/pyqt-tutorial.html">Guru99 - PyQt tutorial</a></p></li>
<li><p><a class="reference external" href="https://www.pythonguis.com/">Python GUIs - PyQt and PySide tutorials</a></p></li>
</ul>
</section>
<section id="learning-goals">
<span id="tutorial-goals"></span><h2>Learning goals<a class="headerlink" href="#learning-goals" title="Link to this heading">#</a></h2>
<p>By the end of this tutorial, we’ll learn:</p>
<ul class="simple">
<li><p>The basics of developing plugins for Spyder, and a general idea of its inner workings.</p></li>
<li><p>The <a class="reference internal" href="#tutorial-plugin-types"><span class="std std-ref">types of plugins</span></a> that can be developed for Spyder.</p></li>
<li><p>The <a class="reference internal" href="#tutorial-structure-details"><span class="std std-ref">structure of a plugin</span></a>, the <a class="reference internal" href="#tutorial-plugin-features"><span class="std std-ref">functionality</span></a> of its components, and how to extend its features.</p></li>
<li><p>The way to package and publish a plugin so that it can be installed and used by others.</p></li>
</ul>
</section>
<section id="spyder-fundamentals">
<span id="tutorial-spyder-fundamentals"></span><h2>Spyder fundamentals<a class="headerlink" href="#spyder-fundamentals" title="Link to this heading">#</a></h2>
<p>Before we dive into the formal explanation of Spyder plugins, let’s briefly go over some Spyder basics.
Spyder is a powerful scientific desktop application written in Python with features for data exploration, interactive execution, deep inspection, and graphical visualization.
Spyder uses Qt for its GUI, through the PyQt or PySide Python bindings via the <a class="reference external" href="https://github.com/spyder-ide/qtpy">QtPy</a> abstraction layer:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.qt.io/">Qt</a> is an open source, multiplatform toolkit for creating graphical user interfaces.
It is a complete development framework that offers utilities for building applications and has extensions for networking, Bluetooth, charts, 3D rendering, and navigation, among others.</p></li>
<li><p>PyQt and PySide are two different Python bindings for the C++-native Qt library, allowing Spyder to use Qt from Python.</p></li>
<li><p><a class="reference external" href="https://github.com/spyder-ide/qtpy">QtPy</a> is an abstraction layer for PyQt and PySide, allowing Spyder to work with either one as well as multiple major Qt versions.</p></li>
</ul>
<p>As for Spyder’s own structure, all of its panes and nearly all its functionality is implemented as plugins.
This means the plugins you create can be just as powerful as Spyder’s own internal components!</p>
<p>To learn more about Spyder itself, check out the <a class="reference external" href="https://www.spyder-ide.org">website</a> and <a class="reference external" href="https://docs.spyder-ide.org">documentation</a>, and to contribute, read the <a class="reference external" href="https://github.com/spyder-ide/spyder/blob/master/CONTRIBUTING.md">contributing guide</a>!</p>
</section>
<section id="basic-plugin-concepts">
<span id="tutorial-plugin-concepts"></span><h2>Basic plugin concepts<a class="headerlink" href="#basic-plugin-concepts" title="Link to this heading">#</a></h2>
<p>Now that we know a little bit about the basics of Spyder, let’s go over the basics of Spyder plugins.</p>
<img alt="Types of Spyder plugins" src="_images/pd_spyder_plugins.png" />
<p>First, let’s define what a plugin is.
A <em>plugin</em> is a component that adds functionality to an application; it can be a graphical component, for example, to display maps, or a non-graphical one that adds additional syntax highlighting schemes.
For Spyder, plugins add new panes, new features, or otherwise modify Spyder’s behavior.
Aside from a few fundamental components, most of Spyder’s functionality is implemented via plugins of two types: <code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code> and <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code>.</p>
<section id="spyderdockableplugin">
<span id="tutorial-spyderdockableplugin"></span><span id="tutorial-plugin-types"></span><h3>SpyderDockablePlugin<a class="headerlink" href="#spyderdockableplugin" title="Link to this heading">#</a></h3>
<p>A plugin with a dockable pane in the Spyder interface, implemented as a <a class="reference external" href="https://doc.qt.io/archives/qtforpython-5.12/PySide2/QtWidgets/QDockWidget.html">QDockWidget</a>.
This is a Qt class that provides a graphical widget that can be docked inside a <a class="reference external" href="https://doc.qt.io/archives/qtforpython-5.12/PySide2/QtWidgets/QMainWindow.html">QMainWindow</a> or floated as a top-level window on the desktop.</p>
<aside class="topic">
<p class="topic-title"><code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code></p>
<p>If we look at the Spyder interface, we can find a number of different panes (on the right side, with the default layout), such as <span class="guilabel">Help</span>, <span class="guilabel">Variable Explorer</span>, <span class="guilabel">Plots</span>, <span class="guilabel">Files</span> and <span class="guilabel">History</span>:</p>
<ul class="simple">
<li><p>Each of these panes is a <code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code> that offers an <span class="guilabel">Undock</span> option by clicking the hamburger menu button in the upper right corner.</p></li>
<li><p>These plugins can also be hidden or shown via their entry in the <span class="menuselection">View ‣ Panes</span> menu, or using their corresponding keyboard shortcut displayed there.</p></li>
</ul>
</aside>
</section>
<section id="spyderpluginv2">
<span id="tutorial-spyderpluginv2"></span><h3>SpyderPluginV2<a class="headerlink" href="#spyderpluginv2" title="Link to this heading">#</a></h3>
<p>A plugin that does not create a new pane (<code class="docutils literal notranslate"><span class="pre">QDockWidget</span></code>) in Spyder’s main window.
In fact, <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code> is the parent class of <code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code>.</p>
<aside class="topic">
<p class="topic-title"><code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code></p>
<p>High-level interface elements that do not offer an undocking option are typically instances of <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code>.
These are typically used to handle more abstract functionality:</p>
<ul class="simple">
<li><p>Examples include the <em>appearance</em> and <em>layout</em> plugins that manage Spyder’s syntax highlighting schemes and window layouts respectively.</p></li>
<li><p>Other examples of this type of plugins are the <em>main menu</em> and keyboard <em>shortcuts</em>.</p></li>
<li><p>Some graphical elements, such as the main toolbar and the status bar, are also instances of the <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code> class.</p></li>
</ul>
</aside>
</section>
</section>
<section id="what-will-we-do">
<span id="tutorial-task-overview"></span><h2>What will we do?<a class="headerlink" href="#what-will-we-do" title="Link to this heading">#</a></h2>
<p>So far, we have <a class="reference internal" href="#tutorial-plugin-concepts"><span class="std std-ref">reviewed the concepts</span></a> necessary to create your first plugin.
In this section, we:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#tutorial-pomodoro-technique"><span class="std std-ref">Explain the Pomodoro technique</span></a> that will be implemented for time management in the plugin.</p></li>
<li><p>Describe the <a class="reference internal" href="#tutorial-plugin-steps"><span class="std std-ref">steps to develop the plugin</span></a>.</p></li>
<li><p><a class="reference internal" href="#tutorial-plugin-features"><span class="std std-ref">Present the main features</span></a> that will be displayed in Spyder once the plugin is developed and published.</p></li>
</ol>
<section id="pomodoro-technique">
<span id="tutorial-pomodoro-technique"></span><h3>Pomodoro Technique<a class="headerlink" href="#pomodoro-technique" title="Link to this heading">#</a></h3>
<p>The <a class="reference external" href="https://www.pomodorotechnique.com/">Pomodoro Technique</a>, designed by Francesco Cirillo, is a time management practice used to increase concentration and productivity when completing tasks or meeting deadlines.
Using a Pomodoro timer can help you pay attention to a task.</p>
<img alt="Description of the pomodoro technique" src="_images/pd_pomodoro_timer.png" />
<p>The typical process of the Pomodoro technique consists of the following six steps:</p>
<ol class="arabic simple">
<li><p>Choose a task to be done.</p></li>
<li><p>Set the Pomodoro timer (default is 25 minutes).</p></li>
<li><p>Work only on that task until the timer ends.</p></li>
<li><p>Put a check mark on a piece of paper when the timer rings; this is called a “pomodoro”.</p></li>
<li><p>If you have fewer than 3 check marks, take a short break (by default, 5 minutes), and go back to step 2.</p></li>
<li><p>When you have completed four Pomodoro cycles, you deserve a longer break (our default is 15 minutes).
The check marks are reset to zero; return to step 1.</p></li>
</ol>
</section>
<section id="steps-to-develop-a-plugin">
<span id="tutorial-plugin-steps"></span><h3>Steps to develop a plugin<a class="headerlink" href="#steps-to-develop-a-plugin" title="Link to this heading">#</a></h3>
<p>These are the general steps that we will follow throughout this tutorial:</p>
<ul class="simple">
<li><p>Select the most suitable <a class="reference internal" href="#tutorial-plugin-types"><span class="std std-ref">plugin type</span></a> and <a class="reference internal" href="#tutorial-plugin-structure"><span class="std std-ref">create its initial structure</span></a> using <a class="reference external" href="https://cookiecutter.readthedocs.io">Cookiecutter</a>.</p></li>
<li><p>Install the plugin in development mode in the <a class="reference internal" href="#tutorial-environment"><span class="std std-ref">virtual environment</span></a> from which we run Spyder.</p></li>
<li><p>Implement the functionality of our plugin using the Spyder classes and following the guidelines indicated in the <a class="reference internal" href="#tutorial-structure-details"><span class="std std-ref">plugin structure</span></a>.</p></li>
<li><p>Build a configuration page for our plugin (if needed), which will appear in <span class="menuselection">Tools ‣ Preferences</span>.</p></li>
</ul>
</section>
<section id="features">
<span id="tutorial-plugin-features"></span><h3>Features<a class="headerlink" href="#features" title="Link to this heading">#</a></h3>
<p>Up to this point, we’ve gone over the Pomodoro Technique and the steps to develop a Spyder plugin.
Now, we identify the features that will be displayed in Spyder once the plugin is implemented.
As <a class="reference internal" href="#tutorial-figure-1"><span class="std std-ref">Figure 1</span></a> and <a class="reference internal" href="#tutorial-figure-2"><span class="std std-ref">Figure 2</span></a> show, there will be features in the toolbar, status bar, and the preferences window.
An explanation of each feature is <a class="reference internal" href="#tutorial-feature-explanation"><span class="std std-ref">provided below</span></a>.</p>
<figure class="align-default" id="id4">
<span id="tutorial-figure-1"></span><img alt="figure1" src="_images/pd_spyder_wireframe.png" />
<figcaption>
<p><span class="caption-text">Figure 1: Location of Spyder Pomodoro Timer widgets in Spyder.</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<span id="tutorial-figure-2"></span><img alt="figure2" src="_images/pd_preferences_wireframe.png" />
<figcaption>
<p><span class="caption-text">Figure 2: Spyder Pomodoro Timer in the preferences window.</span><a class="headerlink" href="#id5" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple" id="tutorial-feature-explanation">
<li><p>Pomodoro Timer</p>
<ul>
<li><p><em>Status bar widget</em>.
Used to display the time of the current pomodoro interval.</p></li>
<li><p><em>State</em>.
We have three activity states: <code class="docutils literal notranslate"><span class="pre">pomodoro</span></code>, <code class="docutils literal notranslate"><span class="pre">short-break</span></code> and <code class="docutils literal notranslate"><span class="pre">long-break</span></code>.
We can show a message (with <a class="reference external" href="https://doc.qt.io/archives/qtforpython-5.12/PySide2/QtWidgets/QMessageBox.html">QMessageBox</a>) to indicate to users that it is time to take a break.</p></li>
<li><p><em>Interactions</em>.
The user can use <span class="guilabel">Start</span>, <span class="guilabel">Stop</span> and <span class="guilabel">Reset</span> buttons to operate the pomodoro timer.
This could be implemented by adding instances of <a class="reference external" href="https://doc.qt.io/archives/qtforpython-5.12/PySide2/QtWidgets/QAction.html">QAction</a> in a toolbar menu.</p></li>
<li><p><em>Preferences</em>.
An option will be implemented in the preferences window to set the time limits of the pomodoro timer.</p></li>
</ul>
</li>
<li><p>Tasks Logger</p>
<ul>
<li><p><em>Counter</em>.
A variable is needed to count the number of completed pomodoros.</p></li>
</ul>
</li>
<li><p>Notifications</p>
<ul>
<li><p><em>Dialog</em>.
Each time a pomodoro or break interval is completed, a message should appear to tell the user to start working on a task or take a break.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="development-environment">
<span id="tutorial-setup"></span><h2>Development environment<a class="headerlink" href="#development-environment" title="Link to this heading">#</a></h2>
<p>This section describes two main tasks for plugin development: <a class="reference internal" href="#tutorial-environment"><span class="std std-ref">Setting up the development environment</span></a> and <a class="reference internal" href="#tutorial-repo"><span class="std std-ref">Creating a repository</span></a> to manage code changes and versions.</p>
<section id="setting-up-the-development-environment">
<span id="tutorial-environment"></span><h3>Setting up the development environment<a class="headerlink" href="#setting-up-the-development-environment" title="Link to this heading">#</a></h3>
<p>In principle, we could use any copy of Spyder within a <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/concepts/environments.html">conda environment</a> installed as described in the <a class="reference external" href="https://docs.spyder-ide.org/current/installation.html#install-guide" title="(in Spyder v5)"><span>Install Guide</span></a>.
However, if you use a working environment that has other dependencies and you want to keep your plugin development independent of them, we recommend creating a new virtual environment that only has Spyder with the minimum dependencies needed for your plugin.</p>
<img alt="Spyder development environment" src="_images/pd_dev_environment.png" />
<p>We can install it using the following system terminal commands (in the Anaconda Prompt, on Windows):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>base
conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>spyder-dev<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>spyder
conda<span class="w"> </span>activate<span class="w"> </span>spyder-dev
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p><a class="reference external" href="https://conda-forge.org/download/">Miniforge</a> is a Python distribution for data science and machine learning, similar to Anaconda except without all the glut of packages installed by default (which won’t be used here).</p></li>
<li><p><a class="reference external" href="https://docs.conda.io/en/latest/">Conda</a> is an open source tool that manages virtual environments and their packages.</p></li>
<li><p>Conda can work with <em>channels</em> that allow the use of packages that are not part of the official distribution.
The most important channel is <a class="reference external" href="https://conda-forge.org/">conda-forge</a>, where a more extensive and updated list of packages is maintained than those offered by Anaconda itself.</p></li>
</ul>
</div>
</section>
<section id="creating-a-repository">
<span id="tutorial-repo"></span><h3>Creating a repository<a class="headerlink" href="#creating-a-repository" title="Link to this heading">#</a></h3>
<p>Now that we have our local virtual environment, it is good practice to manage our source code with a version control system.
By far the most widely used VCS is <a class="reference external" href="https://git-scm.com">Git</a>, and the most popular web hosting service for Git is <a class="reference external" href="https://github.com">GitHub</a>.
You can find the <a class="reference external" href="https://github.com/spyder-ide/spyder">Spyder repository</a> on GitHub, and download (or <code class="docutils literal notranslate"><span class="pre">clone</span></code>) it with Git.</p>
<img alt="Git and GitHub repository concepts" src="_images/pd_github_repo.png" />
<p>To create a Git repository on GitHub, we need to follow these steps:</p>
<ol class="arabic simple">
<li><p>Log in to your GitHub account (or create one if you don’t have one already).</p></li>
<li><p>Click on the <span class="guilabel">New repository</span> option in the <span class="guilabel">+</span> menu at the top right next to your profile picture.</p></li>
<li><p>Type the repository name in the resulting dialog and select the options you want (e.g. whether to initialize the repository with a README or license files).</p></li>
<li><p>Click the <span class="guilabel">Create repository</span> button.</p></li>
<li><p>In the main window of the newly created repository, click on the green <span class="guilabel">Code</span> button and copy the clone link.</p></li>
<li><p>On your local command line, run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">&lt;repo-link&gt;</span></code>.
You must have Git installed and configured on your computer.
If you have no experience using Git, we recommend The Carpentries workshop <a class="reference external" href="https://swcarpentry.github.io/git-novice/">Version Control with Git</a>.</p></li>
</ol>
<p>You can find a detailed description of <a class="reference external" href="https://docs.github.com/en/repositories/creating-and-managing-repositories/quickstart-for-repositories">creating repositories</a> in the official GitHub documentation, and a <a class="reference external" href="https://docs.github.com/en/get-started/start-your-journey/hello-world">Hello World tutorial</a> with basic Git operations from the GitHub interface.</p>
</section>
</section>
<section id="defining-the-plugin-structure">
<span id="tutorial-plugin-structure"></span><h2>Defining the plugin structure<a class="headerlink" href="#defining-the-plugin-structure" title="Link to this heading">#</a></h2>
<p>We already have <a class="reference internal" href="#tutorial-repo"><span class="std std-ref">a Git repository</span></a> and <a class="reference internal" href="#tutorial-environment"><span class="std std-ref">a virtual environment</span></a> where Spyder 5 is installed.
Let’s activate our environment in the system terminal (Anaconda Prompt for Windows) and navigate into the root folder of our repository:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>spyder-dev
<span class="nb">cd</span><span class="w"> </span>path/to/your/repository
</pre></div>
</div>
<p id="tutorial-cookiecutter">Then we need to use <a class="reference external" href="https://cookiecutter.readthedocs.io">Cookiecutter</a> to create the <a class="reference internal" href="#tutorial-structure-details"><span class="std std-ref">initial structure</span></a> of our plugin.
Cookiecutter is a tool implemented in Python specifically designed to create project skeletons.
We have developed a <a class="reference external" href="https://github.com/spyder-ide/spyder5-plugin-cookiecutter">Spyder Cookiecutter template</a> to generate the basic structure of a plugin.</p>
<img alt="Folder structure of our plugin" src="_images/pd_plugin_structure.png" />
<p>Let’s run Cookiecutter to generate our plugin structure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cookiecutter<span class="w"> </span>https://github.com/spyder-ide/spyder5-plugin-cookiecutter
<span class="go">full_name [Spyder Bot]: Spyder Man  # YOUR NAME</span>
<span class="go">email [spyder.python@gmail.com]: spyder.python@gmail.com  # YOUR EMAIL</span>
<span class="go">github_username [spyder-bot]: spyder-ide</span>
<span class="go">github_org [spyder-ide]:</span>
<span class="go">project_name [Spyder Boilerplate]: Spyder Pomodoro Timer</span>
<span class="go">project_short_description [Boilerplate needed to create a Spyder Plugin.]: A very simple pomodoro timer that shows in the status bar.</span>
<span class="go">project_pypi_name [spyder-pomodoro-timer]:</span>
<span class="go">project_package_name [spyder_pomodoro_timer]:</span>
<span class="go">pypi_username [spyder-ide]:</span>
<span class="go">Select plugin_type:</span>
<span class="go">1 - Spyder Dockable Plugin</span>
<span class="go">2 - Spyder Plugin</span>
<span class="go">Choose from 1, 2 [1]: 2</span>
<span class="go">Select open_source_license:</span>
<span class="go">1 - MIT license</span>
<span class="go">2 - BSD license</span>
<span class="go">3 - ISC license</span>
<span class="go">4 - Apache Software License 2.0</span>
<span class="go">5 - GNU General Public License v3</span>
<span class="go">6 - Not open source</span>
<span class="go">Choose from 1, 2, 3, 4, 5, 6 [1]: 1</span>
</pre></div>
</div>
<p id="tutorial-structure-details">After <code class="docutils literal notranslate"><span class="pre">cookicutter</span></code> finishes its job, you’ll get the following tree structure in your repository:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
├── [Some info files]
├── Makefile
├── setup.py
├── spyder_pomodoro_timer
│   ├── __init__.py
│   └── spyder
│       ├── __init__.py
│       ├── api.py
│       ├── confpage.py
│       ├── container.py
│       ├── locale
│       │   └── spyder_pomodoro_timer.pot
│       ├── plugin.py
│       └── widgets.py
└── tests
</pre></div>
</div>
<p>In the root folder you’ll find two important files:</p>
<ul>
<li><p>The Makefile, which has several useful commands:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>clean                remove all build, test, coverage and Python artifacts
clean-build          remove build artifacts
clean-pyc            remove Python file artifacts
clean-test           remove test and coverage artifacts
test                 run tests quickly with the default Python
docs                 generate Sphinx HTML documentation, including API docs
servedocs            compile the docs watching for changes
release              package and upload a release
dist                 builds source and wheel package
install              install the package to the active Python&#39;s site-packages
develop              install the package to the active Python&#39;s site-packages
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.
It helps you install, package and distribute your plugin with Setuptools, the standard for distributing Python packages.
In this file the <code class="docutils literal notranslate"><span class="pre">entry_points</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">setup</span></code> is quite important, as it is what allows Spyder to identify this package as a plugin, and know how to access its functionality.</p></li>
</ul>
<p>The folder for <code class="docutils literal notranslate"><span class="pre">spyder-pomodoro-timer</span></code> has the project name you entered when you ran <code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code>.
Inside it we should see a folder called <code class="docutils literal notranslate"><span class="pre">spyder</span></code>, where we will place the code of our plugin.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">spyder</span></code> directory you’ll find the following files:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">api.py</span></code>.
Exposes the functionality of the plugin to the rest of Spyder, allowing other plugins to build on top of it in turn.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plugin.py</span></code>.
This is the core of the plugin.
Depending on the type of plugin created, you will see an instance of either <code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code> or <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code>.</p>
<ul class="simple">
<li><p>If it is a <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code>, it needs to have a constant named <code class="docutils literal notranslate"><span class="pre">CONTAINER_CLASS</span></code> with its value being a class object which is a subclass of <code class="docutils literal notranslate"><span class="pre">PluginMainContainer</span></code>.</p></li>
<li><p>If it is a <code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code>, it needs constant named <code class="docutils literal notranslate"><span class="pre">WIDGET_CLASS</span></code> with its value being a class object which is a subclass of <code class="docutils literal notranslate"><span class="pre">PluginMainWidget</span></code>.</p></li>
</ul>
<p>For example, with a <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># plugin.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.plugins</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpyderPluginV2</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">my_plugin.spyder.container</span><span class="w"> </span><span class="kn">import</span> <span class="n">MyContainer</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyPlugin</span><span class="p">(</span><span class="n">SpyderPluginV2</span><span class="p">):</span>
    <span class="n">CONTAINER_CLASS</span> <span class="o">=</span> <span class="n">MyContainer</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">container.py</span></code>.
Only used for <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code> plugins, this file has an instance of <code class="docutils literal notranslate"><span class="pre">PluginMainContainer</span></code> that contains references to all graphical elements (or widgets) your plugin will add to the interface.
This is necessary because Qt requires widgets to be children of other widgets before using them (otherwise they appear as floating windows).
Since <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code> is not a widget, the container (which is a widget) serves this role for us.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">widgets.py</span></code>.
Contains the graphical components of our plugin.
This not needed for a <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code> without widgets.
For <code class="docutils literal notranslate"><span class="pre">SpyderPluginV2</span></code> with widgets or a <code class="docutils literal notranslate"><span class="pre">SpyderDockablePlugin</span></code>, the required instance of <code class="docutils literal notranslate"><span class="pre">PluginMainWidget</span></code> goes here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">confpage.py</span></code>.
Includes the configuration page that will be displayed in <span class="guilabel">Preferences</span>, so that the user can adjust the options of our plugin.</p></li>
</ul>
</section>
<section id="building-our-plugin">
<span id="tutorial-building-plugin"></span><h2>Building our plugin<a class="headerlink" href="#building-our-plugin" title="Link to this heading">#</a></h2>
<p>We’ll now build the three components of our plugin step by step: its <a class="reference internal" href="#tutorial-building-widgets-py"><span class="std std-ref">graphical widgets</span></a>, the <a class="reference internal" href="#tutorial-building-container-py"><span class="std std-ref">container for them</span></a>, and the <a class="reference internal" href="#tutorial-building-plugin-py"><span class="std std-ref">plugin interface itself</span></a>.</p>
<p>The <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer">Spyder-Pomodoro-Timer repository</a> contains all the major versions of the code we’ll walk you through, in case you run into any issues.
We’ll call the initial template (produced by <a class="reference internal" href="#tutorial-plugin-structure"><span class="std std-ref">the cookiecutter above</span></a>) <em>INITIAL</em>.
The first working version we are building here we’ll refer to as <code class="docutils literal notranslate"><span class="pre">HELLO</span> <span class="pre">WORLD</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We will include links to the GitHub diffs between the tags at the end of each subsection, as an aid to check the progressive changes that we’ll make in the code.</p>
</div>
<section id="the-widgets">
<span id="tutorial-building-widgets-py"></span><h3>The widgets<a class="headerlink" href="#the-widgets" title="Link to this heading">#</a></h3>
<p>The best way to start building our plugin is to implement its graphical components in the <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code> file.</p>
<p>In <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/tree/v0.1.1-dev0">INITIAL</a>, the <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code> file contains:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Spyder imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.config.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">on_conf_change</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.translations</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_translation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.widgets.mixins</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpyderWidgetMixin</span>

<span class="c1"># Localization</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">get_translation</span><span class="p">(</span><span class="s2">&quot;spyder_pomodoro_timer.spyder&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The predetermined imports are a guide to what we will need in our plugin:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;on_conf_change</span></code> (a decorator) propagates configuration changes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_translation()</span></code> generates and retrieves translation strings for the plugin.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SpyderWidgetMixin</span></code> adds the necessary attributes and methods to widgets to integrate it with Spyder (e.g. icon, style, translation, actions, and extra options).</p></li>
</ul>
<p>Taking a look at the <code class="docutils literal notranslate"><span class="pre">spyder.api.widgets.status</span></code> module, there are two types of predefined widgets to go in the Spyder status bar:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">StatusBarWidget</span></code>.
A class derived from <code class="docutils literal notranslate"><span class="pre">QWidget</span></code> and <code class="docutils literal notranslate"><span class="pre">SpyderWidgetMixin</span></code>, which contains an icon, a label, and a spinner (to show the plugin loading).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BaseTimerStatus</span></code>.
A class derived from <code class="docutils literal notranslate"><span class="pre">StatusBarWidget</span></code> with an internal <code class="docutils literal notranslate"><span class="pre">QTimer</span></code> to periodically update its content.</p></li>
</ul>
<p>Since we want a widget that shows the Pomodoro countdown and is updated periodically, we will use an instance of <code class="docutils literal notranslate"><span class="pre">BaseTimerStatus</span></code>.
So, we can replace</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.widgets.mixins</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpyderWidgetMixin</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.widgets.status</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseTimerStatus</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.utils.icon_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">ima</span>
</pre></div>
</div>
<p>and add an initial import:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Third party imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">qtawesome</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">qta</span>
</pre></div>
</div>
<p>With that, we can write our first widget like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PomodoroTimerStatus</span><span class="p">(</span><span class="n">BaseTimerStatus</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Status bar widget to display the pomodoro timer.&quot;&quot;&quot;</span>

    <span class="n">ID</span> <span class="o">=</span> <span class="s2">&quot;pomodoro_timer_status&quot;</span>
    <span class="n">CONF_SECTION</span> <span class="o">=</span> <span class="s2">&quot;spyder_pomodoro_timer&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;25:00&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_tooltip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override api method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;I am the Pomodoro timer!&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;mdi.av-timer&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Spyder needs an <code class="docutils literal notranslate"><span class="pre">ID</span></code> to be defined for <code class="docutils literal notranslate"><span class="pre">BaseTimerStatus</span></code>.
Its constructor calls the parent class constructor and initializes the label with <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
</div>
<p>We’ve added a tooltip to explain the purpose of our widget, and an icon from <a class="reference external" href="https://github.com/spyder-ide/qtawesome">QtAwesome</a> (a Spyder project that makes it easy to incorporate icon fonts into PyQT applications).
We can find an appropriate icon by running the <code class="docutils literal notranslate"><span class="pre">qta-browser</span></code> command in a system terminal (Anaconda Prompt on Windows).</p>
<p>From here, as <a class="reference internal" href="#tutorial-figure-3"><span class="std std-ref">Figure 3</span></a> shows, we can select and copy the icon name of our preference.</p>
<figure class="align-default" id="id6">
<span id="tutorial-figure-3"></span><img alt="A graphical window showing a grid with a number of timer-related icons." src="_images/pd_qta-browser_timer.png" />
<figcaption>
<p><span class="caption-text">Figure 3: QtAwesome icon browser</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>To finish the implementation of our widget, <code class="docutils literal notranslate"><span class="pre">BaseTimerStatus</span></code> requires the following method to update its contents each time it is requested by the internal timer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---- BaseTimerStatus API</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get current time of the timer.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p>Here’s the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/c7b5cc6c4ce3c4afcd3cb9d3474bdabe2b81e060">INITIAL -&gt; HELLO WORLD widgets.py diff</a> that sums everything up.</p>
</section>
<section id="the-container">
<span id="tutorial-building-container-py"></span><h3>The container<a class="headerlink" href="#the-container" title="Link to this heading">#</a></h3>
<p>The next step is instantiating the status bar widget we <a class="reference internal" href="#tutorial-building-widgets-py"><span class="std std-ref">created above</span></a>.
To do this, we need a <code class="docutils literal notranslate"><span class="pre">QWidget</span></code> instance (the container) to be the parent of all the other widgets in our plugin (as explained in the <a class="reference internal" href="#tutorial-structure-details"><span class="std std-ref">discussion above</span></a>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">INITIAL</span></code> version of the <code class="docutils literal notranslate"><span class="pre">container.py</span></code> file is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.config.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">on_conf_change</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.translations</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_translation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.widgets.main_container</span><span class="w"> </span><span class="kn">import</span> <span class="n">PluginMainContainer</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">get_translation</span><span class="p">(</span><span class="s2">&quot;spyder_pomodoro_timer.spyder&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SpyderPomodoroTimerContainer</span><span class="p">(</span><span class="n">PluginMainContainer</span><span class="p">):</span>

    <span class="c1"># Signals</span>

    <span class="c1"># --- PluginMainContainer API</span>
    <span class="c1"># ------------------------------------------------------------------------</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">SpyderPomodoroTimerContainer</span></code> is already defined, and we just need to implement the <code class="docutils literal notranslate"><span class="pre">setup()</span></code> method.
This is where we add the widget we <a class="reference internal" href="#tutorial-building-widgets-py"><span class="std std-ref">created earlier</span></a> to the container.</p>
<p>To do so, first we need to import the widget:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.widgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">PomodoroTimerStatus</span>
</pre></div>
</div>
<p>Then, we edit the <code class="docutils literal notranslate"><span class="pre">setup()</span></code> method to add an instance of our widget.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Widgets</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span> <span class="o">=</span> <span class="n">PomodoroTimerStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>Here’s the full <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/73dbc2c010274613357d6d8d2e4d1428dc030c77">INITIAL -&gt; HELLO WORLD container.py diff</a>, as a review.</p>
</section>
<section id="the-plugin">
<span id="tutorial-building-plugin-py"></span><h3>The plugin<a class="headerlink" href="#the-plugin" title="Link to this heading">#</a></h3>
<p>Finally, we define our plugin to be registered within Spyder.
The <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/tree/v0.1.1-dev0">INITIAL</a> version (i.e. the one created by <a class="reference internal" href="#tutorial-plugin-structure"><span class="std std-ref">our cookiecutter template</span></a>) of the <code class="docutils literal notranslate"><span class="pre">plugin.py</span></code> file has a number of imports:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Third-party imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qtpy.QtGui</span><span class="w"> </span><span class="kn">import</span> <span class="n">QIcon</span>

<span class="c1"># Spyder imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.plugins</span><span class="w"> </span><span class="kn">import</span> <span class="n">Plugins</span><span class="p">,</span> <span class="n">SpyderPluginV2</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.translations</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_translation</span>

<span class="c1"># Local imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.confpage</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpyderPomodoroTimerConfigPage</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.container</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpyderPomodoroTimerContainer</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">get_translation</span><span class="p">(</span><span class="s2">&quot;spyder_pomodoro_timer.spyder&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and the main plugin class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SpyderPomodoroTimer</span><span class="p">(</span><span class="n">SpyderPluginV2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Spyder Pomodoro Timer plugin.&quot;&quot;&quot;</span>

    <span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;spyder_pomodoro_timer&quot;</span>
    <span class="n">REQUIRES</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">OPTIONAL</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">CONTAINER_CLASS</span> <span class="o">=</span> <span class="n">SpyderPomodoroTimerContainer</span>
    <span class="n">CONF_SECTION</span> <span class="o">=</span> <span class="n">NAME</span>
    <span class="n">CONF_WIDGET_CLASS</span> <span class="o">=</span> <span class="n">SpyderPomodoroTimerConfigPage</span>

    <span class="c1"># --- Signals</span>

    <span class="c1"># --- SpyderPluginV2 API</span>
    <span class="c1"># ------------------------------------------------------------------------</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Spyder Pomodoro Timer&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;A very simple Pomodoro timer&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QIcon</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">container</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_container</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;SpyderPomodoroTimer initialized!&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Note: Remember to use _(&quot;&quot;) to localize the string</span>
        <span class="k">return</span> <span class="n">valid</span><span class="p">,</span> <span class="n">message</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cancellable</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CONTAINER_CLASS</span></code> constant is what registers the container class we <a class="reference internal" href="#tutorial-building-container-py"><span class="std std-ref">implemented previously</span></a> with the top-level plugin object.</p>
</div>
<p>Now, we need to declare the dependencies of our plugin by defining the <code class="docutils literal notranslate"><span class="pre">REQUIRES</span></code> class constant.
As we are going to add a status bar widget, we need the <code class="docutils literal notranslate"><span class="pre">StatusBar</span></code> plugin, as shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">REQUIRES</span> <span class="o">=</span> <span class="p">[</span><span class="n">Plugins</span><span class="o">.</span><span class="n">StatusBar</span><span class="p">]</span>
</pre></div>
</div>
<p>Then, we need to set the icon for our plugin.
For that, we replace</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qtpy.QtGui</span><span class="w"> </span><span class="kn">import</span> <span class="n">QIcon</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Third-party imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">qtawesome</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">qta</span>

<span class="c1"># Spyder imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.utils.icon_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">ima</span>
</pre></div>
</div>
<p>and replace</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">QIcon</span><span class="p">()</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;mdi.av-timer&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">)</span>
</pre></div>
</div>
<p>We also need to add, under Spyder imports:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Spyder imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.plugin_registration.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">on_plugin_available</span>
</pre></div>
</div>
<p>And add the following code after the <code class="docutils literal notranslate"><span class="pre">on_initialize()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@on_plugin_available</span><span class="p">(</span><span class="n">plugin</span><span class="o">=</span><span class="n">Plugins</span><span class="o">.</span><span class="n">StatusBar</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">on_statusbar_available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">statusbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">Plugins</span><span class="o">.</span><span class="n">StatusBar</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">statusbar</span><span class="p">:</span>
        <span class="n">statusbar</span><span class="o">.</span><span class="n">add_status_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="p">)</span>
</pre></div>
</div>
<p>Taking these changes into account, Spyder will recognize the presence of our plugin and identify that it adds a new widget to the status bar.</p>
<p>Finally, we add the following <code class="docutils literal notranslate"><span class="pre">property</span></code> accessor to our plugin class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pomodoro_timer_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">container</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_container</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">container</span><span class="o">.</span><span class="n">pomodoro_timer_status</span>
</pre></div>
</div>
<p>This way, consumers of <code class="docutils literal notranslate"><span class="pre">SpyderPomodoroTimer</span></code> can easily read (but not write) <code class="docutils literal notranslate"><span class="pre">pomodoro_timer_status</span></code> as an attribute of the top-level plugin.</p>
<p>In summary, we implemented the following structure:</p>
<img alt="Basic structure of Pomodoro Timer Spyder plugin." src="_images/pd_plugin_build.png" />
<p>We <a class="reference internal" href="#tutorial-building-widgets-py"><span class="std std-ref">created a widget</span></a>, <a class="reference internal" href="#tutorial-building-container-py"><span class="std std-ref">added it to a container</span></a>.
In the plugin, we accessed the instance of that widget and added it to the status bar.</p>
<p>To summarize, here’s the full diff, <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/d368e695e096e1a054e043671f98b5f0021b6822">INITIAL -&gt; HELLO WORLD plugin.py diff</a>.</p>
</section>
</section>
<section id="testing-our-plugin">
<span id="tutorial-testing-plugin"></span><h2>Testing our plugin<a class="headerlink" href="#testing-our-plugin" title="Link to this heading">#</a></h2>
<p>Now it is time to see how our plugin looks in the Spyder interface.</p>
<p>In a system terminal (Anaconda Prompt on Windows), <strong>from the root folder of our plugin</strong>, we activate the plugin’s environment and install it:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>spyder-dev
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<p>Running Spyder in the system terminal and checking the output, we should see:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>spyder
<span class="go">SpyderPomodoroTimer registered!</span>
</pre></div>
</div>
<p>And as <a class="reference internal" href="#tutorial-figure-4"><span class="std std-ref">Figure 4</span></a> presents, you should see our plugin in the Spyder status bar with the tooltip <span class="guilabel">I am the Pomodoro tooltip</span>!</p>
<figure class="align-default" id="id7">
<span id="tutorial-figure-4"></span><img alt="Spyder status bar, showing a time icon and counter, with the toolip reading I am the Pomodoro tooltip" src="_images/pd_hello_world.png" />
<figcaption>
<p><span class="caption-text">Figure 4: First “Hello World” version of our plugin in the status bar</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Every time we modify the code, we’ll need to restart Spyder to see the updates to our plugin.</p>
</div>
</section>
<section id="making-the-pomodoro-timer-work">
<span id="tutorial-update-timer"></span><h2>Making the Pomodoro timer work<a class="headerlink" href="#making-the-pomodoro-timer-work" title="Link to this heading">#</a></h2>
<p>Now, we’re going to get into the details of how Spyder plugins are implemented in Qt.
The plugin displays the time in Spyder’s status bar, but the Pomodoro timer is not being updated.
In this section, we will use a <code class="docutils literal notranslate"><span class="pre">QTimer</span></code> in the <code class="docutils literal notranslate"><span class="pre">PomodoroTimerStatus</span></code> class (inherited from <code class="docutils literal notranslate"><span class="pre">BaseTimerStatus</span></code>) to update the time shown in the status bar.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you’re new to <a class="reference external" href="https://www.qt.io/">Qt</a>, see our <a class="reference internal" href="qt_introduction.html#qt-fundamentals"><span class="std std-ref">Qt Fundamentals</span></a> page for an overview of the basics, and the  <a class="reference external" href="https://doc.qt.io/">Qt documentation</a> for the full reference.</p>
</div>
<p>Let’s go back to <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code> and add the default time and update interval below the import lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># --- Constants</span>

<span class="c1"># ------ Default time limits</span>
<span class="n">POMODORO_DEFAULT</span> <span class="o">=</span> <span class="mi">25</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span>  <span class="c1"># 25 minutes in milliseconds</span>
<span class="n">INTERVAL</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">POMODORO_DEFAULT</span></code> sets the default Pomodoro time limit in milliseconds and <code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code> is how often to update the timer (every second).</p>
<p>Now, in the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of the <code class="docutils literal notranslate"><span class="pre">PomodoroTimerStatus</span></code> class, we need to add:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Current time limit</span>
<span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_limit</span> <span class="o">=</span> <span class="n">POMODORO_DEFAULT</span>
<span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_limit</span>
<span class="bp">self</span><span class="o">.</span><span class="n">_interval</span> <span class="o">=</span> <span class="n">INTERVAL</span>

<span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_timer</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_interval</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we add the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pomodoro_limit</span></code>: The current Pomodoro time limit in ms, which we set to the default time specified by the <code class="docutils literal notranslate"><span class="pre">POMODORO_DEFAULT</span></code> constant.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">countdown</span></code>: The number of milliseconds left in the countdown, which is set to the starting value of <code class="docutils literal notranslate"><span class="pre">self.pomodoro_limit</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_interval</span></code>: The timer update frequency, to which we assign the value of the <code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code> constant (1000 ms / 1 s).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The leading underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) in <code class="docutils literal notranslate"><span class="pre">self._interval</span></code>, signifies this attribute is private and not intended to be used outside the class.</p>
</div>
<p>After that, we set up the <code class="docutils literal notranslate"><span class="pre">self.timer</span></code> object, a <code class="docutils literal notranslate"><span class="pre">QTimer</span></code> which this class inherits from its parent <code class="docutils literal notranslate"><span class="pre">BaseTimerStatus</span></code>.
To do this, we use the <code class="docutils literal notranslate"><span class="pre">connect</span></code> method of <code class="docutils literal notranslate"><span class="pre">self.timer.timeout</span></code>, passing it a <code class="docutils literal notranslate"><span class="pre">update_timer</span></code> function as a callback.
Then, we call <code class="docutils literal notranslate"><span class="pre">self.timer.start()</span></code>, which calls <code class="docutils literal notranslate"><span class="pre">update_timer</span></code> at the time interval we pass it.</p>
<p>Now let’s implement the <code class="docutils literal notranslate"><span class="pre">update_timer()</span></code> callback method (at the end of <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">display_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the time that should be displayed.&quot;&quot;&quot;</span>
    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)</span>
    <span class="n">seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">minutes</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">seconds</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">update_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the timer and the current widget.</span>
<span class="sd">    Also update the task counter if a task is a set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Update the current timer by decreasing the current running time by one second</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">-=</span> <span class="n">INTERVAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_time</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">display_time()</span></code> method converts the current <code class="docutils literal notranslate"><span class="pre">countdown</span></code> value into human-readable text, which the <code class="docutils literal notranslate"><span class="pre">update_timer()</span></code> callback uses to decrement the timer value every second until it reaches zero.</p>
<p>If we run Spyder again, we will see that our timer has started counting down.</p>
<img alt="Animated screen capture showing the time in the statusbar widget counting down" src="_images/pd_timer_countdown.gif" />
<p>For reference, the changes in this revision (”<code class="docutils literal notranslate"><span class="pre">TIMER</span></code>”) are shown in the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/5d72eaf2c8ce6c7760529c90121837e275757974">HELLO WORLD -&gt; TIMER widgets.py diff</a>.</p>
</section>
<section id="adding-timer-controls-to-the-toolbar">
<span id="tutorial-toolbar"></span><h2>Adding timer controls to the toolbar<a class="headerlink" href="#adding-timer-controls-to-the-toolbar" title="Link to this heading">#</a></h2>
<p>Now that our plugin <a class="reference internal" href="#tutorial-update-timer"><span class="std std-ref">updates the timer</span></a> in Spyder’s toolbar, we’ll add some controls for it, by:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#tutorial-toolbar-subclass"><span class="std std-ref">Creating a toolbar subclass</span></a>,</p></li>
<li><p><a class="reference internal" href="#tutorial-toolbar-actions"><span class="std std-ref">Declaring the high-level toolbar structure</span></a>,</p></li>
<li><p><a class="reference internal" href="#tutorial-toolbar-behavior"><span class="std std-ref">Implementing the toolbar behaviors</span></a>,</p></li>
<li><p><a class="reference internal" href="#tutorial-toolbar-registration"><span class="std std-ref">Registering the toolbar</span></a>, and</p></li>
<li><p><a class="reference internal" href="#tutorial-toolbar-reviewing"><span class="std std-ref">Reviewing our changes</span></a>.</p></li>
</ol>
<p>Implementing these changes will help us learn how to work with toolbars, menus, and actions in Spyder.
For future reference, we’ll call this revision <code class="docutils literal notranslate"><span class="pre">TOOLBAR</span></code>.</p>
<section id="creating-a-toolbar-subclass">
<span id="tutorial-toolbar-subclass"></span><h3>Creating a toolbar subclass<a class="headerlink" href="#creating-a-toolbar-subclass" title="Link to this heading">#</a></h3>
<p>Focusing on <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code> first, let’s import the Spyder <code class="docutils literal notranslate"><span class="pre">ApplicationToolbar</span></code> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.widgets.toolbars</span><span class="w"> </span><span class="kn">import</span> <span class="n">ApplicationToolbar</span>
</pre></div>
</div>
<p>Then, create our own subclass of it above the <code class="docutils literal notranslate"><span class="pre">PomodoroTimerStatus</span></code> class definition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PomodoroTimerToolbar</span><span class="p">(</span><span class="n">ApplicationToolbar</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Toolbar to add buttons to control our timer.&quot;&quot;&quot;</span>
    <span class="n">ID</span> <span class="o">=</span> <span class="s1">&#39;pomodoro_timer_toolbar&#39;</span>
</pre></div>
</div>
<p>The only customization we need is to declare an <code class="docutils literal notranslate"><span class="pre">ID</span></code> to identify our particular toolbar.</p>
<p>Next, we need to declare a boolean variable in our status widget to indicate if the countdown is paused or not.
Let’s add the following code inside the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of the <code class="docutils literal notranslate"><span class="pre">PomodoroTimerStatus</span></code> class definition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">pause</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>And inside the <code class="docutils literal notranslate"><span class="pre">update_timer</span></code> method of the same class, replace</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pause</span><span class="p">:</span>
</pre></div>
</div>
<p>Here’s a full listing of the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/48a946fdbb934b9b85facd3c1b77fc8999e049a9">TIMER -&gt; TOOLBAR widgets.py diff</a>.</p>
</section>
<section id="declaring-the-high-level-toolbar-structure">
<span id="tutorial-toolbar-actions"></span><h3>Declaring the high-level toolbar structure<a class="headerlink" href="#declaring-the-high-level-toolbar-structure" title="Link to this heading">#</a></h3>
<p>Now we’ll declare the high-level structure of our new toolbar, including its actions and sections, as well as that of a menu for our plugin.
This goes in the <code class="docutils literal notranslate"><span class="pre">api.py</span></code> file, since that allows Spyder and other plugins to modify and add to our toolbar if needed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Actions represent the control buttons that have associated functions to be called when interacted with, while toolbar sections contain groups of actions.</p>
</div>
<p>Let’s add the following to <code class="docutils literal notranslate"><span class="pre">api.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PomodoroToolbarActions</span><span class="p">:</span>
    <span class="n">Start</span> <span class="o">=</span> <span class="s2">&quot;start_timer&quot;</span>
    <span class="n">Pause</span> <span class="o">=</span> <span class="s2">&quot;pause_timer&quot;</span>
    <span class="n">Stop</span> <span class="o">=</span> <span class="s2">&quot;stop_timer&#39;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PomodoroToolbarSections</span><span class="p">:</span>
    <span class="n">Controls</span> <span class="o">=</span> <span class="s2">&quot;pomodoro_timer&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">PomodoroMenuSections</span><span class="p">:</span>
    <span class="n">Main</span> <span class="o">=</span> <span class="s2">&quot;main_section&quot;</span>
</pre></div>
</div>
<p>Here, we create three classes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PomodoroToolbarActions</span></code>: Lists the buttons in our toolbar—start, pause and stop the timer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PomodoroToolbarSections</span></code>: Lists the sections of the graphical toolbar—in this case, just one for the timer controls</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PomodoroMenuSections</span></code>: Lists the sections of a menu for the plugin (again, just one in this case)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lightweight class definitions with class constants facilitates the  exchange of this information with minimal complexity.</p>
</div>
<p>To review, you can check out the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/cf540f972f37aaf5d6ccc8524cbcc7aeae9c483b">TIMER -&gt; TOOLBAR api.py diff</a>.</p>
</section>
<section id="implementing-the-toolbar-behaviors">
<span id="tutorial-toolbar-behavior"></span><h3>Implementing the toolbar behaviors<a class="headerlink" href="#implementing-the-toolbar-behaviors" title="Link to this heading">#</a></h3>
<p>Now let’s implement the behavior of our new Pomodoro timer toolbar and its actions.
Because this involves the relationship between our plugin widgets, we’ll do this in the <code class="docutils literal notranslate"><span class="pre">container.py</span></code> file.</p>
<p><a class="reference internal" href="#tutorial-building-widgets-py"><span class="std std-ref">As we did</span></a> with the <code class="docutils literal notranslate"><span class="pre">PomodoroTimerStatus</span></code> class, we will use <a class="reference external" href="https://github.com/spyder-ide/qtawesome">QtAwesome</a> icons for our actions.
We also use the <code class="docutils literal notranslate"><span class="pre">QToolButton</span></code> class for the buttons added to our toolbar.
We’ll first need to add these as third party imports (above the Spyder section):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Third party imports</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">qtawesome</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">qta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qtpy.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QToolButton</span>
</pre></div>
</div>
<p>At the end of the Spyder imports, we also need:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">spyder.utils.icon_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">ima</span>
</pre></div>
</div>
<p>We also need to add local imports from our <code class="docutils literal notranslate"><span class="pre">widgets</span></code> and <code class="docutils literal notranslate"><span class="pre">api</span></code> modules:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.widgets</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">PomodoroTimerStatus</span><span class="p">,</span>
    <span class="n">PomodoroTimerToolbar</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.api</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">PomodoroToolbarActions</span><span class="p">,</span>
    <span class="n">PomodoroToolbarSections</span><span class="p">,</span>
    <span class="n">PomodoroMenuSections</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Next, we need to modify the <code class="docutils literal notranslate"><span class="pre">setup</span></code> method of the <code class="docutils literal notranslate"><span class="pre">SpyderPomodoroTimerContainer</span></code> class.</p>
<p>First, let’s instantiate the <code class="docutils literal notranslate"><span class="pre">PomodoroTimerToolbar</span></code> class that we declared previously:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pomodoro Timer Toolbar&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_toolbar</span> <span class="o">=</span> <span class="n">PomodoroTimerToolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
<p>Second, we create the actions corresponding to start, pause, and stop buttons on our toolbar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">start_timer_action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_action</span><span class="p">(</span>
    <span class="n">PomodoroToolbarActions</span><span class="o">.</span><span class="n">Start</span><span class="p">,</span>
    <span class="n">text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Start&quot;</span><span class="p">),</span>
    <span class="n">tip</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Start timer&quot;</span><span class="p">),</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;fa.play-circle&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">),</span>
    <span class="n">triggered</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start_pomodoro_timer</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">pause_timer_action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_action</span><span class="p">(</span>
    <span class="n">PomodoroToolbarActions</span><span class="o">.</span><span class="n">Pause</span><span class="p">,</span>
    <span class="n">text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pause&quot;</span><span class="p">),</span>
    <span class="n">tip</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pause timer&quot;</span><span class="p">),</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;fa.pause-circle&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">),</span>
    <span class="n">triggered</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pause_pomodoro_timer</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">stop_timer_action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_action</span><span class="p">(</span>
    <span class="n">PomodoroToolbarActions</span><span class="o">.</span><span class="n">Stop</span><span class="p">,</span>
    <span class="n">text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Stop&quot;</span><span class="p">),</span>
    <span class="n">tip</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Stop timer&quot;</span><span class="p">),</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;fa.stop-circle&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">),</span>
    <span class="n">triggered</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stop_pomodoro_timer</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We use the <code class="docutils literal notranslate"><span class="pre">triggered</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">create_action()</span></code> to set the callback function that will be executed when the action is interacted with—in this case, when the corresponding toolbar buttons are clicked.</p>
<p>Third, we create a menu for our actions, and add them to it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_menu</span><span class="p">(</span>
    <span class="s2">&quot;pomodoro_timer_menu&quot;</span><span class="p">,</span>
    <span class="n">text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pomodoro timer&quot;</span><span class="p">),</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;mdi.av-timer&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># Add actions to the menu</span>
<span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="n">start_timer_action</span><span class="p">,</span> <span class="n">pause_timer_action</span><span class="p">,</span> <span class="n">stop_timer_action</span><span class="p">]:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_item_to_menu</span><span class="p">(</span>
        <span class="n">action</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_menu</span><span class="p">,</span>
        <span class="n">section</span><span class="o">=</span><span class="n">PomodoroMenuSections</span><span class="o">.</span><span class="n">Main</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Fourth, let’s create a button to pop up the menu immediately when clicked, setting <code class="docutils literal notranslate"><span class="pre">PopupMode</span></code> to <code class="docutils literal notranslate"><span class="pre">QToolButton.InstantPopup</span></code> to achieve this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_toolbutton</span><span class="p">(</span>
    <span class="s2">&quot;pomodoro_timer_button&quot;</span><span class="p">,</span>
    <span class="n">text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pomodoro timer&quot;</span><span class="p">),</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">qta</span><span class="o">.</span><span class="n">icon</span><span class="p">(</span><span class="s2">&quot;mdi.av-timer&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">ima</span><span class="o">.</span><span class="n">MAIN_FG_COLOR</span><span class="p">),</span>
<span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_button</span><span class="o">.</span><span class="n">setMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_menu</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_button</span><span class="o">.</span><span class="n">setPopupMode</span><span class="p">(</span><span class="n">QToolButton</span><span class="o">.</span><span class="n">InstantPopup</span><span class="p">)</span>
</pre></div>
</div>
<p>Fifth, we add the <code class="docutils literal notranslate"><span class="pre">pomodoro_button</span></code> menu popup to our toolbar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">add_item_to_toolbar</span><span class="p">(</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_button</span><span class="p">,</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_toolbar</span><span class="p">,</span>
    <span class="n">section</span><span class="o">=</span><span class="n">PomodoroToolbarSections</span><span class="o">.</span><span class="n">Controls</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Finally, we insert the appropriate public methods at the end of the <code class="docutils literal notranslate"><span class="pre">SpyderPomodoroTimerContainer</span></code> declaration (in the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">---</span> <span class="pre">Public</span> <span class="pre">API</span></code> section).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">start_pomodoro_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the timer.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">pause</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">pause_pomodoro_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pause the timer.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">pause</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">stop_pomodoro_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the timer.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">pause</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_timer_status</span><span class="o">.</span><span class="n">pomodoro_limit</span>
</pre></div>
</div>
<p>These methods set the <code class="docutils literal notranslate"><span class="pre">pause</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">pomodoro_timer_status</span></code>,
and restart the countdown in the case of <code class="docutils literal notranslate"><span class="pre">stop_pomodoro_timer()</span></code>.</p>
<p>Summing up, here’s the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/492f30771285af937a8a75d69e4e879d21f9dc0f">TIMER -&gt; TOOLBAR container.py diff</a>.</p>
</section>
<section id="registering-the-toolbar">
<span id="tutorial-toolbar-registration"></span><h3>Registering the toolbar<a class="headerlink" href="#registering-the-toolbar" title="Link to this heading">#</a></h3>
<p>A final, mandatory step is to register the new <code class="docutils literal notranslate"><span class="pre">pomodoro_timer_toolbar</span></code> component in the <code class="docutils literal notranslate"><span class="pre">plugin.py</span></code> file.</p>
<p>To register, add <code class="docutils literal notranslate"><span class="pre">Plugins.Toolbar</span></code> to the plugin requirements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">REQUIRES</span> <span class="o">=</span> <span class="p">[</span><span class="n">Plugins</span><span class="o">.</span><span class="n">StatusBar</span><span class="p">,</span> <span class="n">Plugins</span><span class="o">.</span><span class="n">Toolbar</span><span class="p">]</span>
</pre></div>
</div>
<p>And use this plugin’s API to add the Pomodoro toolbar we created in the <code class="docutils literal notranslate"><span class="pre">container</span></code> module to the Spyder toolbar area.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@on_plugin_available</span><span class="p">(</span><span class="n">plugin</span><span class="o">=</span><span class="n">Plugins</span><span class="o">.</span><span class="n">Toolbar</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">on_toolbar_available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">container</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_container</span><span class="p">()</span>
    <span class="n">toolbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">Plugins</span><span class="o">.</span><span class="n">Toolbar</span><span class="p">)</span>
    <span class="n">toolbar</span><span class="o">.</span><span class="n">add_application_toolbar</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">pomodoro_timer_toolbar</span><span class="p">)</span>
</pre></div>
</div>
<p>Here’s the final <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/012c5ef6568114ea945501d44efb30afeefbad98">TIMER -&gt; ACTIONS plugin.py diff</a>.</p>
</section>
<section id="reviewing-our-changes">
<span id="tutorial-toolbar-reviewing"></span><h3>Reviewing our changes<a class="headerlink" href="#reviewing-our-changes" title="Link to this heading">#</a></h3>
<p>Once we’ve restarted Spyder, we should notice several new changes after our work above.</p>
<p>Our Pomodoro toolbar should be present, including its Start, Pause and Stop buttons.
In addition, the buttons should have the tooltips set by their corresponding <code class="docutils literal notranslate"><span class="pre">tip</span></code> parameter.</p>
<img alt="Pomodoro timer toolbar in Spyder, with start, pause and stop buttons" src="_images/pd_toolbar_actions.gif" />
<p>If we check the <span class="menuselection">View ‣ Toolbars</span> menu, there should be a new entry corresponding to our toolbar.</p>
<img alt="View &gt; Toolbars menu in Spyder, showing a new &quot;Pomodoro Timer Toolbar&quot; item" src="_images/pd_view_pomodoro_toolbar.png" />
<p>Finally, when we click the Pomodoro timer buttons on the toolbar, we should see the status bar widget changing accordingly.</p>
<img alt="Timer buttons in Spyder's toolbar being clicked and showing how they start, pause and stop the pomodoro timer in the status bar" src="_images/pd_toolbar_statusbar_interact.gif" />
</section>
</section>
<section id="adding-a-configuration-page">
<span id="tutorial-config"></span><h2>Adding a configuration page<a class="headerlink" href="#adding-a-configuration-page" title="Link to this heading">#</a></h2>
<p>Spyder plugins can have their own preferences section with configurable options listed in Spyder’s <span class="guilabel">Preferences</span> dialog.
In this section, we’ll walk through implementing a preferences page for our example plugin.</p>
<p>We’ll call this final version of our plugin <code class="docutils literal notranslate"><span class="pre">CONFPAGE</span></code>, for reference in the diffs below.</p>
<p>_tutorial-config-defaults:</p>
<section id="defining-the-defaults">
<h3>Defining the defaults<a class="headerlink" href="#defining-the-defaults" title="Link to this heading">#</a></h3>
<p>The first step is to define what options we want to offer our users, which we’ll do in a new file named <code class="docutils literal notranslate"><span class="pre">config.py</span></code>.
In this file we’ll add some key constants and default config values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Spyder-Pomodoro-Timer default configuration.&quot;&quot;&quot;</span>

<span class="c1"># --- Constants</span>

<span class="c1"># ------ Time limits by default</span>
<span class="n">POMODORO_DEFAULT</span> <span class="o">=</span> <span class="mi">25</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span>  <span class="c1"># 25 mins in milliseconds</span>
<span class="n">CONF_SECTION</span> <span class="o">=</span> <span class="s2">&quot;spyder_pomodoro_timer&quot;</span>
<span class="n">CONF_DEFAULTS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span>
        <span class="n">CONF_SECTION</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s2">&quot;pomodoro_limit&quot;</span><span class="p">:</span> <span class="n">POMODORO_DEFAULT</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">},</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;shortcuts&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;pomodoro-timer start/pause&quot;</span><span class="p">:</span> <span class="s2">&quot;Ctrl+Alt+Shift+P&quot;</span><span class="p">}),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">CONF_SECTION</span></code> is the internal name of our plugin’s section in <span class="guilabel">Preferences</span>, as well as the plugin’s namespace in the config dictionary.
<code class="docutils literal notranslate"><span class="pre">CONF_DEFAULTS</span></code> lists the plugin’s settings and their default values.
In the code, we are indicating that <code class="docutils literal notranslate"><span class="pre">pomodoro_limit</span></code> is a configurable parameter within the <code class="docutils literal notranslate"><span class="pre">spyder_pomodoro_timer</span></code> section, and storing its default value in minutes for user display.</p>
<p>At the end of this file, as shown below, we need to set the <code class="docutils literal notranslate"><span class="pre">CONF_VERSION</span></code> constant.
It must be incremented when adding, deleting, or renaming configurable parameters in successive versions of the plugin.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># IMPORTANT NOTES:</span>
<span class="c1"># 1. If you want to *change* the default value of a current option, you need to</span>
<span class="c1">#    do a MINOR update in config version, e.g. from 1.0.0 to 1.1.0</span>
<span class="c1"># 2. If you want to *remove* options that are no longer needed in our codebase,</span>
<span class="c1">#    or if you want to *rename* options, then you need to do a MAJOR update in</span>
<span class="c1">#    version, e.g. from 1.0.0 to 2.0.0</span>
<span class="c1"># 3. You don&#39;t need to touch this value if you&#39;re just adding a new option</span>
<span class="n">CONF_VERSION</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We’ve also moved the definition of <code class="docutils literal notranslate"><span class="pre">POMODORO_DEFAULT</span></code> from <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code> to <code class="docutils literal notranslate"><span class="pre">config.py</span></code>, as we now have a dedicated place for default configuration values.</p>
</div>
<p>For reference, here’s the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/b71457c96013dc0b9c27d588f46568a81e9a2f0c">ACTIONS -&gt; CONFPAGE config.py diff</a>.</p>
</section>
<section id="building-the-preferences-page">
<span id="tutorial-config-page"></span><h3>Building the preferences page<a class="headerlink" href="#building-the-preferences-page" title="Link to this heading">#</a></h3>
<p>Now, we need to create the preferences page itself.</p>
<p>To implement the required code, we will edit the generated <code class="docutils literal notranslate"><span class="pre">confpage.py</span></code> file as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Spyder Pomodoro Timer Preferences Page.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qtpy.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QGridLayout</span><span class="p">,</span> <span class="n">QGroupBox</span><span class="p">,</span> <span class="n">QVBoxLayout</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.preferences</span><span class="w"> </span><span class="kn">import</span> <span class="n">PluginConfigPage</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder.api.translations</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_translation</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">POMODORO_DEFAULT</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">get_translation</span><span class="p">(</span><span class="s2">&quot;spyder_pomodoro_timer.spyder&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SpyderPomodoroTimerConfigPage</span><span class="p">(</span><span class="n">PluginConfigPage</span><span class="p">):</span>

    <span class="c1"># --- PluginConfigPage API</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setup_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">limits_group</span> <span class="o">=</span> <span class="n">QGroupBox</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Time limits&quot;</span><span class="p">))</span>
        <span class="n">pomodoro_spin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_spinbox</span><span class="p">(</span>
            <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pomodoro timer limit&quot;</span><span class="p">),</span>
            <span class="n">_</span><span class="p">(</span><span class="s2">&quot;min&quot;</span><span class="p">),</span>
            <span class="s2">&quot;pomodoro_limit&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">POMODORO_DEFAULT</span><span class="p">,</span>
            <span class="n">min_</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">max_</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">pt_limits_layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">()</span>
        <span class="n">pt_limits_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">pomodoro_spin</span><span class="o">.</span><span class="n">plabel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">pt_limits_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">pomodoro_spin</span><span class="o">.</span><span class="n">spinbox</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">pt_limits_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">pomodoro_spin</span><span class="o">.</span><span class="n">slabel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">pt_limits_layout</span><span class="o">.</span><span class="n">setColumnStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">limits_group</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">pt_limits_layout</span><span class="p">)</span>

        <span class="n">vlayout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">vlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">limits_group</span><span class="p">)</span>
        <span class="n">vlayout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vlayout</span><span class="p">)</span>
</pre></div>
</div>
<p>Most of this code follows the typical pattern of building up a Qt widget-based user interface.
In this case, our options section uses a <code class="docutils literal notranslate"><span class="pre">QGroupBox</span></code>, where the parameters are organized vertically using a <code class="docutils literal notranslate"><span class="pre">QVBoxLayout</span></code>.
Each parameter corresponds to a <code class="docutils literal notranslate"><span class="pre">QGridLayout</span></code> where labels and inputs (in this case a <code class="docutils literal notranslate"><span class="pre">QSpinBox</span></code>) are distributed.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Configuration pages in Spyder provide some helper methods to facilitate this work.
For instance, the <code class="docutils literal notranslate"><span class="pre">create_spinbox()</span></code> method allows us to instantiate and initialize the widgets corresponding to the prefix and suffix labels together with the spinbox, all in a single step.</p>
</div>
<p>You can see the all the changes we’ve made here in the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/bd3bcf2ce895c440fb2d6b80233100c6d86822fe">ACTIONS -&gt; CONFPAGE confpage.py diff</a>.</p>
</section>
<section id="propagating-config-changes">
<span id="tutorial-config-changes"></span><h3>Propagating config changes<a class="headerlink" href="#propagating-config-changes" title="Link to this heading">#</a></h3>
<p>Since we moved all our configuration to <code class="docutils literal notranslate"><span class="pre">config.py</span></code>, we now have to import it into <code class="docutils literal notranslate"><span class="pre">widgets.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local imports</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spyder_pomodoro_timer.spyder.config</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">CONF_SECTION</span><span class="p">,</span>
    <span class="n">CONF_DEFAULTS</span><span class="p">,</span>
    <span class="n">CONF_VERSION</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the class <code class="docutils literal notranslate"><span class="pre">PomodoroTimerStatus</span></code>, after the ID declaration, let’s add the config parameters as class constants:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CONF_SECTION</span> <span class="o">=</span> <span class="n">CONF_SECTION</span>
<span class="n">CONF_DEFAULTS</span> <span class="o">=</span> <span class="n">CONF_DEFAULTS</span>
<span class="n">CONF_VERSION</span> <span class="o">=</span> <span class="n">CONF_VERSION</span>
</pre></div>
</div>
<p>We can now access the configuration options from anywhere in our plugin using the <code class="docutils literal notranslate"><span class="pre">get_conf</span></code> method.
In this case, we use this method to access the <code class="docutils literal notranslate"><span class="pre">pomodoro_limit</span></code> value of the configuration instead of just the <code class="docutils literal notranslate"><span class="pre">POMODORO_DEFAULT</span></code> constant, so we use the current user-selected value if configured:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_conf</span><span class="p">(</span>
    <span class="s2">&quot;pomodoro_limit&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Then, we can add the <code class="docutils literal notranslate"><span class="pre">set_pomodoro_limit()</span></code> method that updates our configurable parameter <code class="docutils literal notranslate"><span class="pre">pomodoro_limit</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@on_conf_change</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="s2">&quot;pomodoro_limit&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">set_pomodoro_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_limit</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pomodoro_limit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_time</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;on_conf_change</span></code> decorator is responsible for capturing the signal generated when changing a specific config option.</p>
</div>
<p>To view all these changes together, see the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/b94cee118bf887b52934230a35d67a0080551a68">ACTIONS -&gt; CONFPAGE widgets.py diff</a>.</p>
</section>
<section id="registering-preferences">
<span id="tutorial-config-registering"></span><h3>Registering preferences<a class="headerlink" href="#registering-preferences" title="Link to this heading">#</a></h3>
<p>Finally, we need to enable using our new preference page in <code class="docutils literal notranslate"><span class="pre">plugin.py</span></code>, by including <code class="docutils literal notranslate"><span class="pre">Plugin.Preferences</span></code> in the list of <code class="docutils literal notranslate"><span class="pre">REQUIRES</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SpyderPomodoroTimer</span><span class="p">(</span><span class="n">SpyderPluginV2</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">REQUIRES</span> <span class="o">=</span> <span class="p">[</span><span class="n">Plugins</span><span class="o">.</span><span class="n">Preferences</span><span class="p">,</span> <span class="n">Plugins</span><span class="o">.</span><span class="n">StatusBar</span><span class="p">,</span> <span class="n">Plugins</span><span class="o">.</span><span class="n">Toolbar</span><span class="p">]</span>
</pre></div>
</div>
<p>…and registering our plugin’s preferences in the <code class="docutils literal notranslate"><span class="pre">on_preferences_available()</span></code> method, which is decorated with <code class="docutils literal notranslate"><span class="pre">&#64;on_plugin_available</span></code> so it is called once the <code class="docutils literal notranslate"><span class="pre">Preferences</span></code> plugin is loaded:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@on_plugin_available</span><span class="p">(</span><span class="n">plugin</span><span class="o">=</span><span class="n">Plugins</span><span class="o">.</span><span class="n">Preferences</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">on_preferences_available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">preferences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="n">Plugins</span><span class="o">.</span><span class="n">Preferences</span><span class="p">)</span>
    <span class="n">preferences</span><span class="o">.</span><span class="n">register_plugin_preferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>You can find the Spyder <span class="guilabel">Preferences</span> dialog in <span class="menuselection">Tools ‣ Preferences</span>, or <span class="menuselection">Python ‣ Preferences</span> on macOS.
As shown in the following image, we should find a section called <span class="guilabel">Spyder Pomodoro Timer</span>, which contains our <span class="guilabel">Pomodoro timer limit</span> parameter.
If we modify that value, we should see how the corresponding status bar timer updates appropriately.</p>
<img alt="A Spyder preferences page entitled Spyder Pomodoro Timer, containing a Pomodoro timer limit option with a numeric value in minutes" src="_images/pd_plugin_confpage.gif" />
<p>Now our example plugin is ready to be published!</p>
<p>For a review of our changes here, see the <a class="reference external" href="https://github.com/spyder-ide/spyder-pomodoro-timer/commit/b238b133d46a52e2d6e57ae938964094a45e7177">ACTIONS -&gt; CONFPAGE plugin.py diff</a>.</p>
</section>
</section>
<section id="publishing-our-plugin">
<span id="tutorial-publishing"></span><h2>Publishing our plugin<a class="headerlink" href="#publishing-our-plugin" title="Link to this heading">#</a></h2>
<p>It’s time to publish our plugin as a PyPI package!
<a class="reference external" href="https://pypi.org">PyPI</a>, the Python Package Index, is the central repository where anyone can publish their own Python packages, that can be installed with Pip or other similar tools.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since the recommended way to install Spyder plugins is through <a class="reference external" href="https://conda-forge.org/">Conda-Forge</a>, its a good idea to also publish our plugin there.
Once our package is uploaded to PyPI, the <a class="reference external" href="https://github.com/conda/grayskull">Grayskull</a> tool can automatically generate a Conda-Forge “recipe” with just a single command.
This can be added to Conda-Forge by cloning the <a class="reference external" href="https://github.com/conda-forge/staged-recipes">Staged Recipes repo</a>, adding the generated recipe to the <code class="docutils literal notranslate"><span class="pre">recipes/</span></code> directory, and submitting a PR with your changes.
See the Conda-Forge <a class="reference external" href="https://conda-forge.org/docs/maintainer/adding_pkgs/">Contributing Packages</a> documentation for full details.</p>
</div>
<img alt="Package publishing flow chart, listing the main tools needed for publishing a package (PyPI, TestPyPI, Twine, and editing the project configuration file)" src="_images/pd_plugin_publish.png" />
<section id="creating-a-pypi-account">
<span id="tutorial-publishing-account"></span><h3>Creating a PyPI account<a class="headerlink" href="#creating-a-pypi-account" title="Link to this heading">#</a></h3>
<p>First, we create an account on the <a class="reference external" href="https://pypi.org">PyPI</a> and <a class="reference external" href="https://test.pypi.org">TestPyPI</a> websites if we don’t have one already, by clicking <span class="guilabel">Register</span> in the top left and entering the appropriate details.
Although our package will eventually be published on PyPI, it is advisable to use TestPyPI first to test that everything works correctly before actually uploading to the real thing, as once package versions are pushed to PyPI they cannot be changed.</p>
<p>Next, we should fill in the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file at the root of our project with our package’s metadata.</p>
<p>Finally, in order to build and upload our package to PyPI, we need the <a class="reference external" href="https://build.pypa.io/">Build</a> builder frontend and <a class="reference external" href="https://twine.readthedocs.io">Twine</a> uploader.
We can install them in our Conda environment using:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>python-build<span class="w"> </span>twine
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The Python <code class="docutils literal notranslate"><span class="pre">build</span></code> package is named <code class="docutils literal notranslate"><span class="pre">build</span></code> on PyPI (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">build</span></code>) and <code class="docutils literal notranslate"><span class="pre">python-build</span></code> on Conda-Forge (<code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">python-build</span></code>); the Conda-Forge package named <code class="docutils literal notranslate"><span class="pre">build</span></code> should <em>not</em> be used as it is obsolete.</p>
</div>
</section>
<section id="building-and-checking-the-package">
<span id="tutorial-publishing-building"></span><h3>Building and checking the package<a class="headerlink" href="#building-and-checking-the-package" title="Link to this heading">#</a></h3>
<p>Before publishing our plugin, we must package it.
To do this, we execute the following code from the root folder of our project (where <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> is located):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>build
</pre></div>
</div>
<p>Then, we can see that the following files are generated in the new <code class="docutils literal notranslate"><span class="pre">dist</span></code> folder:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>spyder_pomodoro_timer
└── dist
    ├── spyder_pomodoro_timer-0.0.1.dev0-py3-none-any.whl
    └── spyder-pomodoro-timer-0.0.1.dev0.tar.gz
</pre></div>
</div>
<p>We can check that newly created distribution packages contain the expected files by inspecting the contents of the <code class="docutils literal notranslate"><span class="pre">tar</span></code> file (on Windows, you’ll need a third-party tool like 7-Zip to open it):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>tzf<span class="w"> </span>dist/spyder-pomodoro-timer-0.0.1.dev0.tar.gz
</pre></div>
</div>
<p>You can also use Twine to run a check of the distribution packages created in the <code class="docutils literal notranslate"><span class="pre">dist</span></code> folder:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>twine<span class="w"> </span>check<span class="w"> </span>dist/*
<span class="go">Checking dist/spyder_pomodoro_timer-0.0.1.dev0-py3-none-any.whl: PASSED</span>
<span class="go">Checking dist/spyder-pomodoro-timer-0.0.1.dev0.tar.gz: PASSED</span>
</pre></div>
</div>
</section>
<section id="testing-and-uploading-to-pypi">
<span id="tutorial-publishing-uploading"></span><h3>Testing and uploading to PyPI<a class="headerlink" href="#testing-and-uploading-to-pypi" title="Link to this heading">#</a></h3>
<p>Now we can use <code class="docutils literal notranslate"><span class="pre">twine</span></code> to upload the distribution packages we have built.
First, we will upload them to TestPyPI to make sure everything works:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>twine<span class="w"> </span>upload<span class="w"> </span>--repository-url<span class="w"> </span>https://test.pypi.org/legacy/<span class="w"> </span>dist/*
</pre></div>
</div>
<p>This command will prompt you for the user name and password with which you registered in TestPyPI.</p>
<p>To view the uploaded package, open the <a class="reference external" href="https://test.pypi.org/project/spyder-pomodoro-timer/">Spyder-Pomodoro-Timer TestPyPI page</a>.
We should notice that some details are missing, such as the package description.
Also, our package is marked as <code class="docutils literal notranslate"><span class="pre">Development</span> <span class="pre">Status</span> <span class="pre">5-Stable</span></code>, which is not (yet) the case.</p>
<p>To fix the package description, we can follow the instructions in <a class="reference external" href="https://packaging.python.org/guides/making-a-pypi-friendly-readme/">Making a PyPI-friendly README</a>.
Since we already have a <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file, we simply add the following lines to the beginning of <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the contents of your README file</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="n">this_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
<span class="n">long_description</span> <span class="o">=</span> <span class="p">(</span><span class="n">this_directory</span> <span class="o">/</span> <span class="s2">&quot;README.md&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;spyder-pomodoro-timer&quot;</span><span class="p">,</span>
    <span class="c1"># ...</span>
    <span class="n">long_description</span><span class="o">=</span><span class="n">long_description</span><span class="p">,</span>
    <span class="n">long_description_content_type</span><span class="o">=</span><span class="s1">&#39;text/markdown&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We can also add or change the classifiers of our package using the <a class="reference external" href="https://pypi.org/classifiers">PyPI classifiers page</a> as a guide.
We can copy the classifiers we consider appropriate and paste them as a list into the <code class="docutils literal notranslate"><span class="pre">classifiers</span></code> argument of <code class="docutils literal notranslate"><span class="pre">setup()</span></code>.</p>
<p>After these changes and bumping the version of our plugin in the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> inside the <code class="docutils literal notranslate"><span class="pre">spyder_pomodoro_timer</span></code> folder, we can repeat the cycle of building a new version of our package with <code class="docutils literal notranslate"><span class="pre">build</span></code> and uploading it to TestPyPI with <code class="docutils literal notranslate"><span class="pre">twine</span></code>.
After checking to make sure the result on TestPyPI looks as we expect, we can reset our package version to the initial <code class="docutils literal notranslate"><span class="pre">0.1.0</span></code> and finally upload it to PyPI with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>twine<span class="w"> </span>upload<span class="w"> </span>dist/
</pre></div>
</div>
<p>We can check the result in at our <a class="reference external" href="https://pypi.org/project/spyder-pomodoro-timer/">Spyder-Pomodoro-Timer PyPI page</a>.
Once this is done, anyone can install our plugin in their environments simply by running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>spyder-pomodoro-timer
</pre></div>
</div>
</section>
</section>
<section id="final-words">
<span id="tutorial-conclusion"></span><h2>Final words<a class="headerlink" href="#final-words" title="Link to this heading">#</a></h2>
<p>Through this tutorial, we have navigated many of the features that Spyder offers for developing plugins.
In Spyder, we have put a lot of effort toward creating and maintaining an API that allows for powerful, flexible and easy plugin development.
The main focus of the development effort between versions 4 and 5 was in this direction, while Spyder 6 further expanded upon this work, so we’re looking forward to seeing what you can do with it!</p>
<p>In this tutorial, we’ve learned how to:</p>
<ul class="simple">
<li><p>Understand the basic building blocks of Spyder development.</p></li>
<li><p>Choose the different types of plugins that can be implemented in Spyder.</p></li>
<li><p>Plan the development of a new Spyder plugin.</p></li>
<li><p>Set up a Spyder plugin development environment.</p></li>
<li><p>Initialize a Git repository on GitHub to manage our version control.</p></li>
<li><p>Generate the basic structure of a plugin using Cookiecutter.</p></li>
<li><p>Understand the basic file structure of a Spyder plugin.</p></li>
<li><p>Create, develop and test a plugin with Spyder.</p></li>
<li><p>Add and register Qt widgets in both the Spyder status bar and the toolbar.</p></li>
<li><p>Include a menu with multiple actions in the toolbar.</p></li>
<li><p>Add configuration options to a plugin and make them appear in the <span class="guilabel">Preferences</span> dialog.</p></li>
<li><p>Edit the packaging configuration of our plugin.</p></li>
<li><p>Publish our plugin on TestPyPI and PyPI.</p></li>
</ul>
<p>We hope these skills have helped you learn how to develop your very own Spyder plugins!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As you may have noticed, there were some features left to implement such as notifications when pomodoros are completed.
Try to implement them by putting your knowledge in practice!
Please, do not hesitate to contact us if you have any questions.</p>
</div>
<p>If you have any ideas for plugin development, you’re welcome to contact us through the <a class="reference external" href="https://github.com/spyder-ide">Spyder-IDE</a> GitHub organization.</p>
</section>
<section id="further-reading">
<span id="tutorial-further-reading"></span><h2>Further reading<a class="headerlink" href="#further-reading" title="Link to this heading">#</a></h2>
<p>If you would like to dive deeper into Spyder plugin development, we invite you to consult the following resources:</p>
<ul class="simple">
<li><p>You can find additional examples in the <a class="reference external" href="https://github.com/spyder-ide/plugin-examples">plugin-examples</a> repository that should be useful to better understand Spyder plugin development.</p></li>
<li><p>A closer look at the <a class="reference external" href="https://github.com/spyder-ide/spyder">Spyder repository</a> itself, especially its simpler plugins (such as History, Plots or Working directory) can help you understand Spyder better.</p></li>
<li><p>You can review the various helper functions, widgets and mixins present in <a class="reference external" href="https://github.com/spyder-ide/spyder/tree/master/spyder/api">spyder.api</a>.</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="plugin_tutorial_1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Our first Spyder plugin</p>
      </div>
    </a>
    <a class="right-next"
       href="common_extension_points.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Extending Spyder</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#spyder-fundamentals">Spyder fundamentals</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-plugin-concepts">Basic plugin concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spyderdockableplugin">SpyderDockablePlugin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spyderpluginv2">SpyderPluginV2</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-will-we-do">What will we do?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pomodoro-technique">Pomodoro Technique</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-to-develop-a-plugin">Steps to develop a plugin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#development-environment">Development environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-development-environment">Setting up the development environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-repository">Creating a repository</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-plugin-structure">Defining the plugin structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-our-plugin">Building our plugin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-widgets">The widgets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-container">The container</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-plugin">The plugin</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-our-plugin">Testing our plugin</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#making-the-pomodoro-timer-work">Making the Pomodoro timer work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-timer-controls-to-the-toolbar">Adding timer controls to the toolbar</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-toolbar-subclass">Creating a toolbar subclass</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-the-high-level-toolbar-structure">Declaring the high-level toolbar structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementing-the-toolbar-behaviors">Implementing the toolbar behaviors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-the-toolbar">Registering the toolbar</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reviewing-our-changes">Reviewing our changes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-configuration-page">Adding a configuration page</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-defaults">Defining the defaults</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-preferences-page">Building the preferences page</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#propagating-config-changes">Propagating config changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-preferences">Registering preferences</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-our-plugin">Publishing our plugin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-pypi-account">Creating a PyPI account</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-and-checking-the-package">Building and checking the package</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-and-uploading-to-pypi">Testing and uploading to PyPI</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#final-words">Final words</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reading">Further reading</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Spyder-API-Docs Contributors
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright  2020-2025 Spyder-API-Docs Contributors; MIT License.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>